<!DOCTYPE html>
<html lang = "en">
    <head>
        <%- include('../partials/head'); %>
        <link rel = "stylesheet" href="/static/parallax.css">
        <link rel = "stylesheet" href="/static/booking.css">
        <link rel = "stylesheet" href="/static/booking.css">
    </head>

    <body>
        <!-- Top Nav Bar -->
        <%- include('../partials/topnav'); %>

        <!-- Parallax -->
        <!-- Photo for parallax is currently not purchased but will be purchased if design is agreed -->
        <div class = "parallax">
            <img id = "logo" src="/static/Logo.webp">

            <div class = "main-body">
                <div class = "content">
                    <div class = "booking">



                        <div class = "entry">
                            <p>Name</p>
                            <input type="text" placeholder="John Smith" id="nameIpt">
                        </div>
                        <div class = "entry">
                            <p>Phone Number</p>
                            <input type="number" placeholder="01234567890" id="phoneIpt">
                        </div>
                        <div class = "break"></div>
                        <div class = "entry">
                            <p>Vehicle Make & Model</p>
                            <input type="text" placeholder="Ford Fiesta" id="carIpt">
                        </div>
                        <div class = "entry">
                            <p>Date & Time of Visit</p>
                            <input type="date" id="dateIpt">
                            <input type="time" step="900" value="12:00" id="timeIpt">
                        </div>
                        <div class = "break"></div>
                        <div class = "entry">
                            <p>Size of vehicle</p>
                            <select id="sizeIpt">
                                <option value="l">Large</option>
                                <option value="m">Medium</option>
                                <option value="s">Small</option>
                            </select>
                        </div>
                        <div class = "break"></div>
                        <button onclick="submitBooking()" id="bookbutton">Book Now!</button>
                        <div class = "break"></div>
                        <p style="color: red;" id="showUser"></p>
                    </div>
                    <div class = "contact">
                        <a href = "https://www.facebook.com/profile.php?id=100063451698085"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 10h-2v2h2v6h3v-6h1.82l.18-2h-2v-.833c0-.478.096-.667.558-.667h1.442v-2.5h-2.404c-1.798 0-2.596.792-2.596 2.308v1.692z"/></svg></a> <br>
                        <div id="phone">
                            <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M16 22.621l-3.521-6.795c-.007.004-1.974.97-2.064 1.011-2.24 1.086-6.799-7.82-4.609-8.994l2.082-1.026-3.492-6.817-2.106 1.039c-1.622.845-2.298 2.627-2.289 4.843.027 6.902 6.711 18.013 12.212 18.117.575.011 1.137-.098 1.677-.345.121-.055 2.102-1.029 2.11-1.033zm4-5.621h-1v-13h1v13zm-2-2h-1v-9h1v9zm4-1h-1v-7h1v7zm-6-1h-1v-5h1v5zm-2-1h-1v-3h1v3zm10 0h-1v-3h1v3zm-12-1h-1v-1h1v1z"/></svg>                            <p>07719189702</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>

    <script>
        function submitBooking(){
            const data = {
                name: document.getElementById('nameIpt').value,
                number: document.getElementById('phoneIpt').value,
                car: document.getElementById('carIpt').value,
                date: document.getElementById('dateIpt').value,
                time: document.getElementById('timeIpt').value,
                size: document.getElementById('sizeIpt').value
            }

            console.log(data);

            // Check that data is not null
            if(data.name == ''){
                showUser("Please enter a name");
                return
            }
            else if(data.number == ''){
                showUser("Please enter a number");
                return
            }
            else if(data.car == ''){
                showUser("Please enter a Car make & Model");
                return
            }
            else if(data.date == ''){
                showUser("Please enter a date");
                return
            }
            else if(data.time == ''){
                showUser("Please enter a time");
                return
            }
            else if(data.size == ''){
                showUser("Please select a size");
                return
            }

            fetch('/submitBooking', {
                method: 'POST',
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            });
        }

        function showUser(message, error = true){
            const textElem = document.getElementById('showUser');

            if(!error)
                textElem.style.color = "green";

            textElem.innerHTML = "";
            textElem.textContent = message;
        }
    </script>
</html>